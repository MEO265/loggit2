<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Why the Fork? • loggit2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Why the Fork?">
<meta name="description" content="What does `loggit2` offer that `loggit` doesn't? And why was a fork necessary?">
<meta property="og:description" content="What does `loggit2` offer that `loggit` doesn't? And why was a fork necessary?">
<meta property="og:image" content="https://filedn.eu/ldV4y5YKQXjQ0wNYvKjlJrp/opengraph_filled_2.png">
<meta name="robots" content="noindex">
<link rel="icon" type="image/svg+xml" href="https://filedn.eu/ldV4y5YKQXjQ0wNYvKjlJrp/favicon.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">loggit2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.3.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/loggit2.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/fork.html">Why the Fork?</a></li>
    <li><a class="dropdown-item" href="../articles/further_configurations.html">Further Configurations</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MEO265/loggit2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Why the Fork?</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MEO265/loggit2/blob/main/vignettes/articles/fork.rmd" class="external-link"><code>vignettes/articles/fork.rmd</code></a></small>
      <div class="d-none name"><code>fork.rmd</code></div>
    </div>

    
    
<p>Ideally, I would have preferred to further develop
<a href="https://github.com/ryapric/loggit" class="external-link">loggit</a>, as I consider the concept highly commendable and
worthy of recognition. Unfortunately, this was not possible because the
maintainer was unresponsive to messages or pull requests at the time of
the fork (the last release was over three years ago). Additionally,
CRAN’s rules do not permit the takeover of the package without the
maintainer’s consent as long as the package passes the checks.</p>
<p>Therefore, I ultimately decided to create a fork
(<a href="https://github.com/MEO265/loggit2" class="external-link">loggit2</a>) to address some fundamental issues and
implement necessary improvements. In the following, I will discuss the
most pressing points.</p>
<div class="section level2">
<h2 id="call-of-conditions">Call of conditions<a class="anchor" aria-label="anchor" href="#call-of-conditions"></a>
</h2>
<p>In <a href="https://github.com/ryapric/loggit" class="external-link">loggit</a>, all “condition log handlers”
(<code>loggit::message()</code>, <code>loggit::warning()</code>,
<code>loggit::stop()</code>) presented themselves as the call of the
condition. This, combined with the fact that <a href="https://github.com/ryapric/loggit" class="external-link">loggit</a> does
not allow passing a condition to the “condition log handlers” (e.g., in
<code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch()</a></code>), made it significantly more difficult to trace
the origin of a condition.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">loggit</span><span class="fu">::</span><span class="fu">message</span><span class="op">(</span><span class="st">"This is a message"</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"timestamp": "2022-04-12T10:55:02-0500", "log_lvl": "INFO", "log_msg": "This is a message"}</span></span>
<span><span class="co">#&gt; This is a message</span></span>
<span><span class="fu">loggit</span><span class="fu">::</span><span class="kw">warning</span><span class="op">(</span><span class="st">"This is a warning"</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"timestamp": "2022-04-12T10:55:02-0500", "log_lvl": "WARN", "log_msg": "This is a warning"}</span></span>
<span><span class="co">#&gt; Warning in loggit::warning("This is a warning"): This is a warning</span></span>
<span><span class="fu">loggit</span><span class="fu">::</span><span class="kw">stop</span><span class="op">(</span><span class="st">"This is an error"</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"timestamp": "2020-05-31T20:59:33-0500", "log_lvl": "ERROR", "log_msg": "This is an error"}</span></span>
<span><span class="co">#&gt; Error in loggit::stop("This is an error"): This is an error</span></span></code></pre></div>
<p>In <a href="https://github.com/MEO265/loggit2" class="external-link">loggit2</a>, each condition handler shows the same call
as its base equivalent.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"This is another message"</span><span class="op">)</span></span>
<span><span class="co">#&gt; This is another message</span></span>
<span><span class="fu">loggit2</span><span class="fu">::</span><span class="fu"><a href="../reference/message.html">message</a></span><span class="op">(</span><span class="st">"This is another message"</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"timestamp": "2024-12-07T12:16:19+0000", "log_lvl": "INFO", "log_msg": "This is another message\n"}</span></span>
<span><span class="co">#&gt; This is another message</span></span>
<span></span>
<span><span class="fu">base</span><span class="fu">::</span><span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span><span class="st">"This is another warning"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: This is another warning</span></span>
<span><span class="fu">loggit2</span><span class="fu">::</span><span class="kw"><a href="../reference/warning.html">warning</a></span><span class="op">(</span><span class="st">"This is another warning"</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"timestamp": "2024-12-07T12:16:19+0000", "log_lvl": "WARN", "log_msg": "This is another warning"}</span></span>
<span><span class="co">#&gt; Warning: This is another warning</span></span>
<span></span>
<span><span class="fu">base</span><span class="fu">::</span><span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"This is another error"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: This is another error</span></span>
<span><span class="fu">loggit2</span><span class="fu">::</span><span class="kw"><a href="../reference/stop.html">stop</a></span><span class="op">(</span><span class="st">"This is another error"</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"timestamp": "2024-12-07T12:16:19+0000", "log_lvl": "ERROR", "log_msg": "This is another error"}</span></span>
<span><span class="co">#&gt; Error: This is another error</span></span></code></pre></div>
<p>For further information and comparisons look <a href="#further-comparisons">here</a>.</p>
</div>
<div class="section level2">
<h2 id="missing-stopifnot">Missing <code>stopifnot()</code><a class="anchor" aria-label="anchor" href="#missing-stopifnot"></a>
</h2>
<p>In <a href="https://github.com/ryapric/loggit" class="external-link">loggit</a>, there are no “condition log handlers”
(i.e., functions that work like their base equivalents but also write to
the log) for <code><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">base::stopifnot()</a></code>. This makes the migration of
existing code (without logs) unnecessarily complicated.</p>
<p>In <code>loggit2</code>, this has been added:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="st">"TRUE is not true"</span> <span class="op">=</span> <span class="cn">TRUE</span>, <span class="st">"This is an error"</span> <span class="op">=</span> <span class="fl">3L</span> <span class="op">&lt;</span> <span class="fl">1L</span>, <span class="st">"This is another error"</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: This is an error</span></span>
<span><span class="fu">loggit2</span><span class="fu">::</span><span class="fu"><a href="../reference/stopifnot.html">stopifnot</a></span><span class="op">(</span><span class="st">"TRUE is not true"</span> <span class="op">=</span> <span class="cn">TRUE</span>, <span class="st">"This is an error"</span> <span class="op">=</span> <span class="fl">3L</span> <span class="op">&lt;</span> <span class="fl">1L</span>, <span class="st">"This is another error"</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"timestamp": "2024-12-07T12:16:19+0000", "log_lvl": "ERROR", "log_msg": "This is an error"}</span></span>
<span><span class="co">#&gt; Error: This is an error</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="log-entries-containing">Log entries containing <code>:</code><a class="anchor" aria-label="anchor" href="#log-entries-containing"></a>
</h2>
<p>In <a href="https://github.com/ryapric/loggit" class="external-link">loggit</a>, log entries containing <code>:</code> are
not correctly parsed by <code>loggit::read_logs()</code>. In the best
case, the log messages are truncated after the <code>:</code>. See also
<a href="https://github.com/ryapric/loggit/issues/26" class="external-link">here</a>. This bug
is fixed in <code>loggit2</code>.</p>
</div>
<div class="section level2">
<h2 id="clearing-the-log">Clearing the log<a class="anchor" aria-label="anchor" href="#clearing-the-log"></a>
</h2>
<p>In <a href="https://github.com/ryapric/loggit" class="external-link">loggit</a>, clearing the log with
<code>loggit::rotate_logs(0L)</code> results in the log being unreadable
by <code>loggit::read_logs()</code>, even with new entries. See also <a href="https://github.com/ryapric/loggit/issues/30" class="external-link">here</a>. This bug is
fixed in <code>loggit2</code>.</p>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>In addition to these issues, there are several others, but these are
the most pressing and can all be easily fixed.</p>
<p>Apart from the aforementioned bugs and missing features, there is
significant untapped potential in the control settings (e.g., global
settings regarding log levels) that can be implemented without
complicating <a href="https://github.com/ryapric/loggit" class="external-link">loggit</a>.</p>
<p>All of these aspects will be addressed in <a href="https://github.com/MEO265/loggit2" class="external-link">loggit2</a>. I
welcome any suggestions for new features, bug reports, or even a direct
pull request on either topic.</p>
</div>
<div class="section level2">
<h2 id="further-comparisons">Further comparisons<a class="anchor" aria-label="anchor" href="#further-comparisons"></a>
</h2>
<p>In <a href="https://github.com/ryapric/loggit" class="external-link">loggit</a>, each condition handler shows itself as the
call of the condition.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">loggit</span><span class="fu">::</span><span class="fu">message</span><span class="op">(</span><span class="st">"This is another message"</span><span class="op">)</span></span>
<span>  <span class="fu">loggit</span><span class="fu">::</span><span class="kw">warning</span><span class="op">(</span><span class="st">"This is another warning"</span><span class="op">)</span></span>
<span>  <span class="fu">loggit</span><span class="fu">::</span><span class="kw">stop</span><span class="op">(</span><span class="st">"This is another error"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">f</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"timestamp": "2022-04-12T10:55:02-0500", "log_lvl": "INFO", "log_msg": "This is a message"}</span></span>
<span><span class="co">#&gt; This is a message</span></span>
<span><span class="co">#&gt; {"timestamp": "2022-04-12T10:55:02-0500", "log_lvl": "WARN", "log_msg": "This is a warning"}</span></span>
<span><span class="co">#&gt; Warning in loggit::warning("This is a warning"): This is a warning</span></span>
<span><span class="co">#&gt; {"timestamp": "2020-05-31T20:59:33-0500", "log_lvl": "ERROR", "log_msg": "This is an error"}</span></span>
<span><span class="co">#&gt; Error in loggit::stop("This is an error"): This is an error</span></span></code></pre></div>
<p>In <a href="https://github.com/MEO265/loggit2" class="external-link">loggit2</a>, each condition handler shows the same call
as its <code>{base}</code> equivalent.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"This is another message"</span><span class="op">)</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span><span class="st">"This is another warning"</span><span class="op">)</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"This is another error"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">f</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; This is another message</span></span>
<span><span class="co">#&gt; Warning in f(): This is another warning</span></span>
<span><span class="co">#&gt; Error in f(): This is another error</span></span>
<span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">loggit2</span><span class="fu">::</span><span class="fu"><a href="../reference/message.html">message</a></span><span class="op">(</span><span class="st">"This is another message"</span><span class="op">)</span></span>
<span>  <span class="fu">loggit2</span><span class="fu">::</span><span class="kw"><a href="../reference/warning.html">warning</a></span><span class="op">(</span><span class="st">"This is another warning"</span><span class="op">)</span></span>
<span>  <span class="fu">loggit2</span><span class="fu">::</span><span class="kw"><a href="../reference/stop.html">stop</a></span><span class="op">(</span><span class="st">"This is another error"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">f</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; {"timestamp": "2024-12-07T12:16:19+0000", "log_lvl": "INFO", "log_msg": "This is another message\n"}</span></span>
<span><span class="co">#&gt; This is another message</span></span>
<span><span class="co">#&gt; {"timestamp": "2024-12-07T12:16:19+0000", "log_lvl": "WARN", "log_msg": "This is another warning"}</span></span>
<span><span class="co">#&gt; Warning in f(): This is another warning</span></span>
<span><span class="co">#&gt; {"timestamp": "2024-12-07T12:16:19+0000", "log_lvl": "ERROR", "log_msg": "This is another error"}</span></span>
<span><span class="co">#&gt; Error in f(): This is another error</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>loggit2</p>
</div>

<div class="pkgdown-footer-right">
  <p>Developed by Matthias Ollech, Ryan Price.</p>
</div>

    </footer>
</div>





  </body>
</html>
